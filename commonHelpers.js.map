{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const PER_PAGE = 15;\n\nconst API_KEY = '43997901-59e2ef8a5969ad3162d77619c';\naxios.defaults.baseURL = 'https://pixabay.com/api/'\n\nexport const searchPhotos = async (query, photosCurrentPage = 1) => {\n    const response = await axios.get('', {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: PER_PAGE,\n            page: photosCurrentPage,\n        }\n    });\n\n    return response.data;\n}","export const createGalleryMarkup = (images) => {\n    return images.map(\n        ({\n            webformatURL, largeImageURL, tags, likes, views, comments, downloads\n        }) => `\n      <li class=\"item-list\">\n        <a href=\"${largeImageURL}\" class=\"item-list-link\">\n          <img class=\"item-list-img\" src=\"${webformatURL}\" alt=\"${tags}\">\n        </a>\n        <div class='markup-info'>\n          <div class=\"item-list-info-text\">\n            <h3 class=\"item-list-title\">Likes</h3>\n            <p class=\"item-list-text\">${likes}</p>\n          </div>\n          <div class=\"item-list-info-text\">\n            <h3 class=\"item-list-title\">Views</h3>\n            <p class=\"item-list-text\">${views}</p>\n          </div>\n          <div class=\"item-list-info-text\">\n            <h3 class=\"item-list-title\">Comments</h3>\n            <p class=\"item-list-text\">${comments}</p>\n          </div>\n          <div class=\"item-list-info-text\">\n            <h3 class=\"item-list-title\">Downloads</h3>\n            <p class=\"item-list-text\">${downloads}</p>\n          </div>\n        </div>\n      </li>`\n    ).join('');\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchPhotos, PER_PAGE } from \"./js/pixabay-api.js\";\nimport { createGalleryMarkup } from \"./js/render-functions.js\";\n\nconst galleryEl = document.querySelector('.gallery');\nconst searchField = document.querySelector('.search-field');\nconst searchForm = document.querySelector('.form');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nasync function fetchAndRenderPhotos(query, page) {\n    try {\n        const imagesData = await searchPhotos(query, page);\n        loaderEl.classList.add('is-hidden');\n\n        if (imagesData.totalHits === 0) {\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                color: '#EF4040',\n            });\n            return;\n        }\n\n        galleryEl.insertAdjacentHTML('beforeend', createGalleryMarkup(imagesData.hits));\n\n        const lightbox = new SimpleLightbox('.gallery a');\n        lightbox.refresh();\n\n        if (page * PER_PAGE >= imagesData.totalHits) {\n            loadMoreBtn.classList.add('is-hidden');\n            iziToast.show({\n                message: 'We are sorry, but you have reached the end of search results.',\n                position: 'topRight',\n                color: '#EF4040',\n            });\n        } else {\n            loadMoreBtn.classList.remove('is-hidden');\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong',\n            position: 'topRight',\n            color: '#EF4040',\n        });\n    } finally {\n        loaderEl.classList.add('is-hidden');\n    }\n}\n\nfunction onSearchFormSubmit(event) {\n    event.preventDefault();\n\n    currentQuery = searchField.value.trim();\n\n    if (currentQuery === '') {\n        galleryEl.innerHTML = '';\n        event.target.reset();\n        iziToast.error({\n            title: 'Error',\n            message: 'Illegal operation',\n            position: 'topRight',\n            color: '#EF4040',\n        });\n        return;\n    }\n\n    currentPage = 1;\n    galleryEl.innerHTML = '';\n    loaderEl.classList.remove('is-hidden');\n\n    fetchAndRenderPhotos(currentQuery, currentPage);\n\n    event.target.reset();\n}\n\nfunction onLoadMoreBtnClick() {\n    currentPage += 1;\n    loaderEl.classList.remove('is-hidden');\n    fetchAndRenderPhotos(currentQuery, currentPage);\n}\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["PER_PAGE","API_KEY","axios","searchPhotos","query","photosCurrentPage","createGalleryMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryEl","searchField","searchForm","loaderEl","loadMoreBtn","currentPage","currentQuery","fetchAndRenderPhotos","page","imagesData","iziToast","SimpleLightbox","error","onSearchFormSubmit","event","onLoadMoreBtnClick"],"mappings":"owBAEO,MAAMA,EAAW,GAElBC,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAe,MAAOC,EAAOC,EAAoB,KACzC,MAAMH,EAAM,IAAI,GAAI,CACjC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUJ,EACV,KAAMK,CACT,CACT,CAAK,GAEe,KCpBPC,EAAuBC,GACzBA,EAAO,IACV,CAAC,CACG,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CACvE,IAAc;AAAA;AAAA,mBAEKL,CAAa;AAAA,4CACYD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,wCAK9BC,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,wCAIRC,CAAS;AAAA;AAAA;AAAA,YAIjD,EAAM,KAAK,EAAE,ECpBPC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAc,EACdC,EAAe,GAEnB,eAAeC,EAAqBlB,EAAOmB,EAAM,CAC7C,GAAI,CACA,MAAMC,EAAa,MAAMrB,EAAaC,EAAOmB,CAAI,EAGjD,GAFAL,EAAS,UAAU,IAAI,WAAW,EAE9BM,EAAW,YAAc,EAAG,CAC5BC,EAAS,KAAK,CACV,QAAS,2EACT,SAAU,WACV,MAAO,SACvB,CAAa,EACD,MACH,CAEDV,EAAU,mBAAmB,YAAaT,EAAoBkB,EAAW,IAAI,CAAC,EAE7D,IAAIE,EAAe,YAAY,EACvC,QAAO,EAEZH,EAAOvB,GAAYwB,EAAW,WAC9BL,EAAY,UAAU,IAAI,WAAW,EACrCM,EAAS,KAAK,CACV,QAAS,gEACT,SAAU,WACV,MAAO,SACvB,CAAa,GAEDN,EAAY,UAAU,OAAO,WAAW,CAE/C,OAAQQ,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBF,EAAS,MAAM,CACX,MAAO,QACP,QAAS,uBACT,SAAU,WACV,MAAO,SACnB,CAAS,CACT,QAAc,CACNP,EAAS,UAAU,IAAI,WAAW,CACrC,CACL,CAEA,SAASU,EAAmBC,EAAO,CAK/B,GAJAA,EAAM,eAAc,EAEpBR,EAAeL,EAAY,MAAM,OAE7BK,IAAiB,GAAI,CACrBN,EAAU,UAAY,GACtBc,EAAM,OAAO,QACbJ,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oBACT,SAAU,WACV,MAAO,SACnB,CAAS,EACD,MACH,CAEDL,EAAc,EACdL,EAAU,UAAY,GACtBG,EAAS,UAAU,OAAO,WAAW,EAErCI,EAAqBD,EAAcD,CAAW,EAE9CS,EAAM,OAAO,OACjB,CAEA,SAASC,GAAqB,CAC1BV,GAAe,EACfF,EAAS,UAAU,OAAO,WAAW,EACrCI,EAAqBD,EAAcD,CAAW,CAClD,CAEAH,EAAW,iBAAiB,SAAUW,CAAkB,EACxDT,EAAY,iBAAiB,QAASW,CAAkB"}